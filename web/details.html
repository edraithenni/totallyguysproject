<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>Детали фильма</title>
</head>
<body>
  <div id="movieDetails">Загрузка...</div>

  <script>
    async function loadDetails() {
      // retrieve id from query-parameter: details.html?id=...
      const params = new URLSearchParams(window.location.search);
      const id = params.get("id");

      if (!id) {
        document.getElementById("movieDetails").innerText = "Не указан фильм";
        return;
      }

      try {
        const res = await fetch(`/api/movies/${id}`);
        const movie = await res.json();

        document.getElementById("movieDetails").innerHTML = `
          <h2>${movie.title}</h2>
          <p><b>Год:</b> ${movie.year || '—'}</p>
          <p><b>Описание:</b> ${movie.plot || 'Нет описания'}</p>
          <img src="${movie.poster}" style="width:200px">
        `;
      } catch (err) {
        document.getElementById("movieDetails").innerText = "Ошибка загрузки деталей";
      }
    }

    loadDetails();
  </script>
</body>
</html>
